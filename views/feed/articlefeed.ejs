<%- include("../partials/header") %>
<link rel="stylesheet" href="/stylesheets/feed/feed.css">
<link rel="stylesheet" href="/stylesheets/feed/sidebar.css">
<link rel="stylesheet" href="/stylesheets/feed/content.css">

<title>Sportsfeed</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <button class="sidebar-toggler mr-3" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="/">Sportsfeed</a>
        <div class="collapse navbar-collapse justify-content-between" id="navbarText">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/user/feed">My Feed</a>
                </li>
            </ul>
            <span class="navbar-text">
                <ul class="nav navbar-nav">
                    <% if (!(currentUser)){ %>
                        <li class="mx-3"><a href="/login">Login</a></li>
                        <li class="mx-3"><a href="/register">Signup</a></li>    
                    <% }else{ %>
                        <li class="mx-3"><a><strong><%= currentUser.username %></strong></a></li>
                        <li class="mx-3"><a href="/logout">Logout</a></li>
                    <% } %>
                </ul>
            </span>
        </div>
    </nav>
    <section class="container-fluid mr-2">
        <div class="row main-row">
            <div id="sidebar" class="px-3 sidebar">
                <div class="sidebar-header">
                    <h5>Change Feed</h5>
                    <hr>
                </div>
                <ul class="nav flex-column my-2">
                    <li class="nav-item py-2">
                        <% if (sport.toUpperCase() == "NBA") { %>
                        <div class="nav-link current py-2"><span class="league-name">NBA</span>
                            <span class="float-right"><i class="fas nba fa-chevron-right" aria-hidden="true"></i></span>
                        </div>
                        <div class="team-list nba-team-list current">
                        <% }else{ %>
                        <div class="nav-link py-2"><span class="league-name">NBA</span>
                            <span class="float-right"><i class="fas nba fa-chevron-down" aria-hidden="true"></i></span>
                        </div>
                        <div class="team-list nba-team-list">
                        <% } %>
                            <ul class="nav flex-column">
                                <a href="/nba/feed/a/nba"><li class="league-list-item pl-4">League</li></a>
                                <a href="/nba/search"><li class="league-list-item pl-4">Search for a team</li></a>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item py-2">
                        <% if (sport.toUpperCase() == "NFL") { %>
                            <div class="nav-link current py-2"><span class="league-name">NFL</span>
                                <span class="float-right"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list nfl-team-list current">
                        <% }else{ %>
                            <div class="nav-link py-2"><span class="league-name">NFL</span>
                                <span class="float-right"><i class="fas fa-chevron-down" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list nfl-team-list">
                        <% } %>
                            <ul class="nav flex-column">
                                <li class="league-list-item pl-4">League</li>
                                <a href="/nfl/search"><li class="league-list-item pl-4">Search for a team</li></a>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item py-2">
                        <% if (sport.toUpperCase() == "NHL") { %>
                            <div class="nav-link current py-2"><span class="league-name">NHL</span>
                                <span class="float-right"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list nhl-team-list current">
                        <% }else{ %>
                            <div class="nav-link py-2"><span class="league-name">NHL</span>
                                <span class="float-right"><i class="fas fa-chevron-down" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list nhl-team-list">
                        <% } %>
                            <ul class="nav flex-column">
                                <li class="league-list-item pl-4">League</li>
                                <a href="/nhl/search"><li class="league-list-item pl-4">Search for a team</li></a>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item py-2">
                        <% if (sport.toUpperCase() == "MLB") { %>
                            <div class="nav-link current py-2"><span class="league-name">MLB</span>
                                <span class="float-right"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list mlb-team-list current">
                        <% }else{ %>
                            <div class="nav-link py-2"><span class="league-name">MLB</span>
                                <span class="float-right"><i class="fas fa-chevron-down" aria-hidden="true"></i></span>
                            </div>
                            <div class="team-list mlb-team-list">
                        <% } %>         
                            <ul class="nav flex-column">
                                <li class="league-list-item pl-4">League</li>
                                <a href="/mlb/search"><li class="league-list-item pl-4">Search for a team</li></a>
                            </ul>
                        </div>        
                    </li>
                </ul>
            </div>
            <div id="contentSection" class="contents container-fluid col-10 mt-4">
                <div id="header-row" class="row mt-5 mx-3 justify-content-start align-items-center">
                    <div class="team-name"><h3><%= sport.toLowerCase() %> / <strong><%= team.toLowerCase() %></strong></h3></div>
                </div>
                <div id="result-section" class="mt-3 px-5 pt-3">
                    <div id="filter-row" class="row mb-4 justify-content-between align-items-center">
                        <div class="filters">
                            <a href="/nba/feed/v/<%= team %>"class="btn btn-light filter-btn btn-md mr-3">Videos</a>
                            <a class="btn btn-light filter-btn set btn-md">Articles</a>
                        </div>
                        <div id="follow" class="mr-4">
                            <a class="btn followed px-3"><i class="fas fa-check mr-2"></i>Followed</a>
                        </div>
                    </div>
                    <div id="brResults" class="container-fluid">
                        <div class="row result-header align-items-center w-100 mb-3">
                            <img class="brand" src="https://bleacherreport.com/img/favicon/appleTouchIcon.png" alt="">
                            <h4><em>Bleacher Report</em></h4>
                        </div>
                        <% for (var i = 0; i < brArticles.length; i+=4) { %>
                            <% if (brArticles.length - i <= 4) { %>
                            <div class="row br row-result-contents mt-3 mb-5 justify-content-start hide">
                            <% }else{ %>
                            <div class="row br row-result-contents mt-3 justify-content-between hide">
                            <% } %>
                                <% for (var j = i; j < i+4 && j < brArticles.length; j++) { %>
                                    <div class="col-3">
                                        <a href="<%= brArticles[j].url %>">
                                        <div class="card">
                                            <img src="<%= brArticles[j].urlToImage %>" class="card-img-top" alt="">
                                            <div class="card-body">
                                                <h5 class="card-title"><a href="<%= brArticles[j].url %>"><%= brArticles[j].title.substring(0,75) %>...</a></h5>
                                                <% if (brArticles[j].author == null || brArticles[j].author == ""){ %>
                                                    <p class="card-text">Unknown / bleacherreport.com</p>
                                                <% }else{ %>
                                                    <p class="card-text"><%= brArticles[j].author%> / bleacherreport.com</p>
                                                <% } %>
                                            </div>
                                        </div></a>
                                    </div>
                                <% } %>
                            </div>
                        <% } %>
                        <div class="row br show-more mt-4 justify-content-center py-2"><i class="fas fa-chevron-down"></i></div>
                    </div>
                    <hr>
                    <div id="espnResults" class="container-fluid">
                        <div class="row result-header align-items-center w-100 mb-3">
                            <img class="brand" src="https://a.espncdn.com/wireless/mw5/r1/images/bookmark-icons-v2/espn-icon-180x180.png" alt="">
                            <h4><em>ESPN</em></h4>
                        </div>
                        <% for (var i = 0; i < espnArticles.length; i+=4) { %>
                            <% if (espnArticles.length - i <= 4) { %>
                            <div class="row espn row-result-contents mt-3 mb-5 justify-content-start hide">
                            <% }else{ %>
                            <div class="row espn row-result-contents mt-3 justify-content-between hide">
                            <% } %>
                                <% for (var j = i; j < i+4 && j < espnArticles.length; j++) { %>
                                    <div class="col-3">
                                        <a href="<%= espnArticles[j].url%>">
                                        <div class="card">
                                            <img src="<%= espnArticles[j].urlToImage %>" class="card-img-top" alt="">
                                            <div class="card-body">
                                                <h5 class="card-title"><a href="<%= espnArticles[j].url %>"><%= espnArticles[j].title.substring(0,75) %>...</a></h5>
                                                <% if (espnArticles[j].author == null || espnArticles[j].author == ""){ %>
                                                    <p class="card-text">Unknown / espn.com</p>
                                                <% }else{ %>
                                                    <p class="card-text"><%= espnArticles[j].author%> / espn.com</p>
                                                <% } %>
                                            </div>
                                        </div></a>
                                    </div>
                                <% } %>
                            </div>
                        <% } %>
                        <div class="row espn show-more mt-4 justify-content-center py-2"><i class="fas fa-chevron-down"></i></div>
                    </div>
                    <hr>
                    <div id="foxResults" class="container-fluid">
                        <div class="row result-header align-items-center w-100 mb-3">
                            <img class="brand" src="https://b.fssta.com/sta/images/152x152.png" alt="">
                            <h4><em>Fox Sports</em></h4>
                        </div>
                        <% for (var i = 0; i < foxArticles.length; i+=4) { %>
                            <% if (foxArticles.length - i <= 4) { %>
                            <div class="row fox row-result-contents mt-3 mb-5 justify-content-start hide">
                            <% }else{ %>
                            <div class="row fox row-result-contents mt-3 justify-content-between hide">
                            <% } %>
                                <% for (var j = i; j < i+4 && j < foxArticles.length; j++) { %>
                                    <div class="col-3">
                                        <a href="<%= foxArticles[j].url%>">
                                        <div class="card">
                                            <img src="<%= foxArticles[j].urlToImage %>" class="card-img-top" alt="">
                                            <div class="card-body">
                                                <h5 class="card-title"><a href="<%= foxArticles[j].url %>"><%= foxArticles[j].title.substring(0,75) %>...</a></h5>
                                                <% if (foxArticles[j].author == null || foxArticles[j].author == ""){ %>
                                                    <p class="card-text">Unknown / foxsports.com</p>
                                                <% }else{ %>
                                                    <p class="card-text"><%= foxArticles[j].author%> / foxsports.com</p>
                                                <% } %>
                                            </div>
                                        </div></a>
                                    </div>  
                                <% } %>
                            </div>
                        <% } %>
                        <div class="row fox show-more mt-4 justify-content-center py-2"><i class="fas fa-chevron-down"></i></div>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="/js/sidebar.js" type="text/javascript"></script>
    <script src="/js/loadmore.js" type="text/javascript"></script>

<%- include("../partials/footer") %>
